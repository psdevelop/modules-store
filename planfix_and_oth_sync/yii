#!/usr/bin/env php7
<?php

use Dotenv\Dotenv;

if (getenv('app_config') === 'production') {
    define('YII_ENV', 'prod');
    define('YII_DEBUG', false);
} else {
    define('YII_ENV', 'dev');
    define('YII_DEBUG', true);
}

require(__DIR__ . '/vendor/autoload.php');
require_once __DIR__ . '/components/helpers/env-helpers.php';
require(__DIR__ . '/vendor/yiisoft/yii2/Yii.php');

(Dotenv::create(__DIR__))->load();

$environment = getenv('app_config') ? getenv('app_config') : 'development';
$configPath = __DIR__ . '/config/' . $environment . '/';

$config = require($configPath . 'console.php');

$application = new yii\console\Application($config);
$exitCode = $application->run();
exit($exitCode);
